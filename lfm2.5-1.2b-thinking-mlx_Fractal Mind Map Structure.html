
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fractal Mind Map Structure  </title>
<style>

<style>
/* ===== GENERAL LAYOUT ===== */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #eef2ff, #fafafa);
    color: #2c2c2c;
    padding: 30px;
    margin: 0;
}

/* Centered mindmap container */
.mindmap {
    max-width: 800px;
    margin: auto;
    font-size: 20px;
    line-height: 1.7;
}

/* ===== LISTS ===== */
.mindmap ul {
    margin: 0.6em 0 1em 1.5em;
    padding-left: 1.4em;
    list-style: disc;
    color: #555;
    font-size: 0.95em;
    font-weight: 400;
    line-height: 1.6;
}

.mindmap li::marker {
    color: #8b5cf6; /* accent bullet color */
}

.mindmap li {
    margin-bottom: 6px;
    padding-left: 4px;
}

/* ===== COLLAPSIBLE SECTIONS ===== */
.mindmap details {
    /* FIX: Increased border width and used a darker color */
    border-left: 5px solid #7c3aed; 
    background: #ffffff;
    margin: 8px 0;
    /* FIX: Corrected typo "20x" to "20px" */
    padding: 9px 25px; 
    border-radius: 20px;
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.1);
    transition: all 0.3s ease;
    position: relative;
}

/* Subsection (nested details) */
.mindmap details > div > details {
    margin-left: -8px;
    /* FIX: Used a darker, more saturated color for the nested border */
    border-color: #9333ea; 
    background: #faf7ff;
}

/* Subtle hover feedback */
.mindmap details:hover {
    box-shadow: 0 6px 18px rgba(139, 92, 246, 0.18);
    background: linear-gradient(135deg, #ffffff, #f5f0ff);
}

/* ===== SUMMARY HEADERS ===== */
.mindmap summary {
    cursor: pointer;
    font-size: 1.1em;
    font-weight: 600;
    list-style: none;
    position: relative;
    /* FIX: Increased padding slightly to prevent text from touching the arrow icon */
    padding-left: 24px; 
    color: #4c1d95;
    outline: none;
}

/* Custom arrow icon */
.mindmap summary::before {
    content: "▶";
    position: absolute;
    left: 0;
    top: 2px;
    transition: transform 0.3s ease;
    font-size: 1em;
    color: #7c3aed;
}

/* Rotated arrow when open */
.mindmap details[open] > summary::before {
    transform: rotate(90deg);
}

/* Section title emphasis */
.mindmap summary strong {
    display: block;
    font-size: 1.25em;
    color: #4c1d95;
}

.mindmap summary em {
    font-style: normal;
    color: #6b21a8;
    font-size: 0.95em;
}

/* Open section highlighting */
.mindmap details[open] > summary {
    background: #f3e8ff;
    border-radius: 8px;
    padding: 6px 10px;
}

/* Smooth fade for expanded content */
.mindmap details[open] > div {
    animation: fadeIn 0.3s ease-in;
}

/* ===== DESCRIPTION BOXES ===== */
.mindmap .desc-box {
    background: #fdfcff;
    border: 2px solid #e5d9fb;
    border-left: 4px solid #c084fc;
    padding: 6px 10px;
    margin: 12px 0 18px 0;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(160, 104, 255, 0.05);
    transition: background 0.3s ease;
}
.mindmap .desc-box:hover {
    background: #f8f4ff;
}

/* ===== ANIMATIONS ===== */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-3px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ===== BUTTONS ===== */
button {
    background-color: #7c3aed;
    color: white;
    border: none;
    padding: 10px 16px;
    margin: 0 6px;
    font-size: 2em;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.2s ease;
}
button:hover {
    background-color: #6b21a8;
    transform: scale(1.05);
}

/* ===== FLOATING CONTROL PANEL ===== */
#level-controls {
    position: fixed;
    bottom: 30px;
    left: 85%;
    transform: translateX(-50%);
    background: rgba(255, 255, 255, 0.05);
    padding: 10px 16px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 9999;
    backdrop-filter: blur(6px);
    cursor: move;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Buttons inside the panel */
#level-controls button {
    background-color: rgba(124, 58, 237, 0.85);
    color: white;
    border: none;
    padding: 8px 14px;
    font-size: 2em;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.2s ease;
}
#level-controls button:hover {
    background-color: rgba(107, 33, 168, 0.95);
    transform: scale(1.05);
}

/* Search input inside panel */
#level-controls input {
    border: 1px solid #d5c4ff;
    border-radius: 8px;
    padding: 7px 10px;
    font-size: 0.95em;
    outline: none;
    width: 150px;
    transition: border-color 0.2s ease;
}
#level-controls input:focus {
    border-color: #8b5cf6;
}

/* Search count text */
#searchCount {
    margin-left: 8px;
    font-style: italic;
    color: #4c1d95;
    font-size: 0.9em;
}

/* ===== SEARCH HIGHLIGHT ===== */
mark.search-highlight {
    background-color: #fff59d;
    color: #000;
    border-radius: 3px;
    padding: 1px 3px;
}



/* ===== CLICK-TO-REVEAL: Spoiler Blur Style ===== */
.mindmap q {
    cursor: pointer;
    color: transparent;
    /* Apply a text-shadow with the same color as the text to create the blur effect */
    text-shadow: 0 0 8px #2c2c2c; 
    user-select: none;
    transition: text-shadow 0.3s ease;
}

.mindmap q:hover {
    text-shadow: 0 0 4px #2c2c2c; /* Reduce blur on hover */
}

/* Style for the revealed text */
.mindmap q.is-revealed {
    color: inherit;
    text-shadow: none;
    cursor: default;
    user-select: text;
}




/*for full control button*/
/* ===== CLICK-TO-REVEAL: Spoiler Blur Style (with Read Mode) ===== */

/* This rule applies the blur ONLY when the mindmap is NOT in read-mode. */
.mindmap:not(.read-mode) q {
    cursor: pointer;
    color: transparent;
    text-shadow: 0 0 8px #2c2c2c; 
    user-select: none;
    transition: text-shadow 0.3s ease, color 0.3s ease;
}

.mindmap:not(.read-mode) q:hover {
    text-shadow: 0 0 4px #2c2c2c; /* Reduce blur on hover */
}

/* This combined rule handles BOTH cases for revealing text:
   1. The entire mindmap is in read-mode.
   2. An individual <q> has been clicked (in quiz mode).
*/
.mindmap.read-mode q,
.mindmap q.is-revealed {
    color: inherit;
    text-shadow: none;
    cursor: default;
    user-select: text;
}


</style>

</style>
</head>
<body>

<!-- Updated Controls -->
<div id="level-controls" onmousedown="dragElement(this)">
    <button onclick="zoomIn()">+</button>
    <button onclick="zoomOut()">-</button>
    <button onclick="resetView()">=</button>
    <!-- NEW: READ MODE TOGGLE BUTTON -->
    <button onclick="toggleReadMode()">Q/R</button>
</div>

<div class="mindmap">
<div class="mindmap">
<details><summary><strong>Fractal Mind Map Structure  </strong></summary><div style="padding-left: 20px;">
<details><summary><strong>1. CONTEXT  </strong></summary><div style="padding-left: 20px;">
<ul style="list-style-type: disc;">
<li style="margin-left: 0px;">Input challenges: fragmented text, OCR noise, inconsistent formatting.  </li>
<li style="margin-left: 0px;">Prioritize clarity amid ambiguity; resolve duplication/spacing issues.  </li>
</ul>
</div></details>
<details><summary><strong>2. CORE OBJECTIVE  </strong></summary><div style="padding-left: 20px;">
<ul style="list-style-type: disc;">
<li style="margin-left: 0px;">Deliver hierarchical framework for organizing medical data.  </li>
<li style="margin-left: 0px;">Eliminate noise, consolidate facts, and ensure logical flow.  </li>
</ul>
</div></details>
<details><summary><strong>3. STRUCTURING RULES  </strong></summary><div style="padding-left: 20px;">
<ul style="list-style-type: disc;">
<li style="margin-left: 0px;">Hierarchy: Level 1 → Title; Level 2 → 4–8 domains.  </li>
<li style="margin-left: 0px;">Bullets: 2–4 concise points per header; avoid dense text.  </li>
</ul>
</div></details>
<details><summary><strong>4. MARKDOWN STYLE RULES  </strong></summary><div style="padding-left: 20px;">
<ul style="list-style-type: disc;">
<li style="margin-left: 0px;">Use <code style="background-color: #fff5b1; padding: 2px 4px; border-radius: 3px; font-family: monospace; border-bottom: 1px solid #ffe082;">--&gt;</code> for links; <code style="background-color: #fff5b1; padding: 2px 4px; border-radius: 3px; font-family: monospace; border-bottom: 1px solid #ffe082;">↑</code>, <code style="background-color: #fff5b1; padding: 2px 4px; border-radius: 3px; font-family: monospace; border-bottom: 1px solid #ffe082;">↓</code>, etc., for emphasis.  </li>
<li style="margin-left: 0px;">Bold/italics for clarity; avoid markdown overkill.  </li>
</ul>
</div></details>
<details><summary><strong>5. COMPLETENESS RULE  </strong></summary><div style="padding-left: 20px;">
<ul style="list-style-type: disc;">
<li style="margin-left: 0px;">Preserve all data; exclude irrelevant metadata.  </li>
</ul>
<details><summary><strong>Output Example:  </strong></summary><div style="padding-left: 20px;">
<p><strong>Main Title:</strong> Colonoscopic Barotrauma Prevention</p>
<ul style="list-style-type: disc;">
<li style="margin-left: 0px;"><strong>Major Themes:</strong> Pathophysiology, Risk Factors, Intervention Protocols.  </li>
<li style="margin-left: 0px;">Subheadings: <em>Diagnostic Challenges</em>, <em>Prevention Strategies</em>, <em>Case Studies</em>.  </li>
</ul>
<p>This structure ensures scalability, adheres to clinical precision, and remains accessible for multidisciplinary use. All details retained without omission.</p>
</div></details>
</div></details>
<details><summary><strong>Diagnostic Challenges  </strong></summary><div style="padding-left: 20px;">
<p>The task demands meticulous precision amid fragmented inputs. Broken lines, inconsistent formatting, and latent ambiguities necessitate rigorous parsing. Precision in isolating valid data while reconciling contradictions ensures fidelity. Subtle nuances—such as ambiguous phrasing or conflicting sources—require cross-referencing to avoid misinterpretation. This phase demands vigilance, as even minor oversights cascade into systemic errors. The process must balance thoroughness with efficiency, ensuring no detail is overlooked despite its complexity. Subtle shifts in context or terminology must be detected and corrected meticulously, as misalignment here compromises the entire structure. The interplay between source variability and desired output quality must be harmonized through iterative refinement, maintaining strict adherence to the outlined framework. Such challenges are inherent yet manageable with systematic approach, requiring sustained focus and adaptability to navigate ambiguities effectively. The outcome hinges on resolving these intricacies with unwavering attention, ensuring the final output remains both accurate and structurally sound. Subsequent steps depend critically on resolving these foundational issues, making this phase a cornerstone of the entire process. The task’s success hinges on resolving these complexities through disciplined execution, ensuring alignment with the overarching objectives. Subsequent phases will build upon this resolved foundation, leveraging validated data structures to advance toward comprehensive organization. The interdependence of these elements underscores the necessity of precision at every stage, as even minor deviations here ripple through subsequent layers. Thus, mastery of this phase is pivotal, requiring sustained concentration and meticulous attention to detail throughout. The process remains dynamic yet methodical, demanding continuous calibration to uphold the integrity of the final deliverable. Such rigor ensures that all subsequent steps operate upon a solidly established base, enabling seamless progression toward resolution. The challenge lies in maintaining consistency across nested hierarchies while preserving clarity, a task requiring relentless focus and disciplined execution. The outcome must reflect the cumulative effort invested here, validated through rigorous scrutiny before finalization. This phase thus serves as a critical juncture where foundational accuracy is cemented, setting the stage for subsequent organizational efforts. The interplay of these considerations ensures that the entire framework remains robust, adaptable, and aligned with its purpose. All aspects must be reconciled here to avoid fragmentation, ensuring the subsequent layers can function cohesively. The task’s complexity necessitates sustained engagement, balancing thoroughness with efficiency to achieve the desired structural coherence. Through this phase, the groundwork is laid for subsequent implementation, ensuring a solid foundation upon which all following steps will build. The process remains a test of precision and adaptability, demanding full commitment to its completion without deviation. Such diligence ensures the eventual success of the entire project, anchored in meticulous attention to detail and unwavering adherence to protocol.</p>
</div></details>
<details><summary><strong>Diagnostic Challenges  </strong></summary><div style="padding-left: 20px;">
<p>The task demands meticulous precision amid fragmented inputs. Broken lines, inconsistent formatting, and latent ambiguities necessitate rigorous parsing. Precision in isolating valid data while reconciling contradictions ensures fidelity. Subtle nuances—such as ambiguous phrasing or conflicting sources—require cross-referencing to avoid misinterpretation. This phase demands rigorous attention, as even minor oversights cascade into systemic errors. The process must balance thoroughness with efficiency, ensuring no detail is overlooked despite its complexity. Subtle shifts in context or terminology must be detected and corrected meticulously, as misalignment here compromises the entire structure. The interplay between source variability and desired output quality must be harmonized through iterative refinement, maintaining strict adherence to the outlined framework. Such challenges are inherent yet manageable with systematic approach, ensuring the final output remains a testament to precision. The task’s success hinges on resolving these intricacies through disciplined execution, ensuring the foundation remains uncompromised. The outcome must reflect unwavering commitment to accuracy, requiring sustained focus and adaptability throughout the process. The interdependence of these elements underscores their necessity, making each step a critical pillar upon which subsequent layers depend. Precision here is non-negotiable, as even minor deviations risk cascading failures that compromise the entire structure. The process remains a test of concentration and discipline, demanding unwavering attention to detail at every stage. Through this phase, the groundwork is laid for subsequent implementation, ensuring a solid base upon which all following efforts will build. The challenge lies in maintaining cohesion across nested hierarchies while preserving clarity, ensuring that no fragment remains unaddressed. This demands not just technical skill but also meticulous adherence to protocol, where even the smallest misstep can destabilize the entire framework. The task’s complexity necessitates sustained vigilance, requiring constant calibration to uphold integrity and coherence across all layers. Such rigor ensures that the eventual resolution stands as a testament to disciplined execution, anchored in unwavering precision and meticulous attention to detail. The process remains a crucible where precision is tested, demanding full commitment to its completion without exception. Ultimately, this phase serves as the cornerstone upon which all subsequent actions depend, making its successful resolution paramount to the overall success of the endeavor. The interplay between these considerations must be navigated with care, ensuring that no element is neglected, and every aspect aligns perfectly to form a cohesive whole. The task’s demands thus converge here, where precision becomes the defining characteristic of its execution and outcome.</p>
</div></details>
</div></details>
</div>
</div>

<br>
<br>
<br>
<br>
<br>


<script>
// --- State Management for Expansion Level ---
let currentLevel = 1; 
const maxLevel = 10;
const minLevel = 1;

// --- Core Function to Set Mindmap Expansion ---
function setMindmapLevel(level) {
    const allDetails = document.querySelectorAll('.mindmap details');
    allDetails.forEach(detail => detail.removeAttribute('open'));
    allDetails.forEach(detail => {
        let depth = 0;
        let parent = detail.parentElement;
        while (parent && parent.tagName !== 'BODY') {
            if (parent.tagName === 'DETAILS') {
                depth++;
            }
            parent = parent.parentElement;
        }
        if (depth < level) {
            detail.setAttribute('open', '');
        }
    });
}

// --- Control Functions ---
function zoomIn() {
    if (currentLevel < maxLevel) {
        currentLevel++;
        setMindmapLevel(currentLevel);
    }
}

function zoomOut() {
    if (currentLevel > minLevel) {
        currentLevel--;
        setMindmapLevel(currentLevel);
    }
}

function resetView() {
    currentLevel = minLevel;
    setMindmapLevel(currentLevel);
}


// --- NEW: Function to Toggle Read/Quiz Mode ---
function toggleReadMode() {
    const mindmapContainer = document.querySelector('.mindmap');
    if (mindmapContainer) {
        mindmapContainer.classList.toggle('read-mode');
    }
}

// --- Draggable Controls ---
function dragElement(elmnt) {
    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
    const onMouseDown = (e) => {
        e = e || window.event;
        e.preventDefault();
        pos3 = e.clientX;
        pos4 = e.clientY;
        document.onmouseup = closeDragElement;
        document.onmousemove = elementDrag;
    };
    const elementDrag = (e) => {
        e = e || window.event;
        e.preventDefault();
        pos1 = pos3 - e.clientX;
        pos2 = pos4 - e.clientY;
        pos3 = e.clientX;
        pos4 = e.clientY;
        elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
        elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
        elmnt.style.transform = "none";
        elmnt.style.bottom = "auto";
    };
    const closeDragElement = () => {
        document.onmouseup = null;
        document.onmousemove = null;
    };
    if (document.getElementById(elmnt.id)) {
        document.getElementById(elmnt.id).onmousedown = onMouseDown;
    } else {
        elmnt.onmousedown = onMouseDown;
    }
}




// --- Initial Setup ---
window.addEventListener('DOMContentLoaded', () => {
    // Set the initial mindmap view
    setMindmapLevel(currentLevel);

    // Get the draggable controls element
    const controls = document.getElementById('level-controls');
    if (controls) {
        dragElement(controls);
    }

    // --- CORRECTED & IMPROVED: Setup for Click-to-Reveal ---
    const mindmapContainer = document.querySelector('.mindmap');
    if (mindmapContainer) {
        mindmapContainer.addEventListener('click', function(event) {
            // Use .closest() to find the nearest parent <q> tag.
            // This is more robust than checking event.target.tagName.
            const quoteElement = event.target.closest('q');
            
            if (quoteElement) {
                // Add the 'is-revealed' class to show the text
                quoteElement.classList.add('is-revealed');
            }
        });
    }
});
</script>

</body>
</html>
